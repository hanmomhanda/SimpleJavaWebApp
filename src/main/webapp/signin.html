<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Login form</title>
<link rel="stylesheet" href="static/css/style.css">
</head>

<body>

<div class="login-wrap">
  <h2>Log in</h2>

  <div class="form">
    <form name="login-form" id="login-form">
      <input type="text" placeholder="User Id" id="user-id" name="userId" />
      <input type="password" placeholder="Password" name="password" />
      <button id="sign-in"> Sign in </button>
      <a href="signup.html"> <p> Don't have an account? Register </p></a>
    </form>
    <div>
      <h3 id="msg-area"></h3>
    </div>
  </div>
</div>
<script src='static/js/jquery-1.11.3.min.js'></script>
<script src="static/js/index.js"></script>
<script>
$(document).ready(function() {
  $('#user-id').focus();
  $('#sign-in').on('click', function(event) {
    var form = document.getElementById('login-form'),
        formData = $(form).serialize();
    event.preventDefault();
    $.ajax({
      type: 'POST',
      url: '/simple-login/signIn',
      data: formData,
      success: function(data) {
        var result = JSON.parse(data);
//console.log('data:', data);
//console.log('result:', result);
        switch(result.type) {
          case 'success':
            $('#login-form').hide();
            $('#msg-area').html(result.msg);
          break;
          case 'fail':
            $('#msg-area').html(result.msg);
          break;
        }
      },
      error: function(data, status, e) {
        $('#msg-area').html(status);
      }
    })
  });
});
</script>
</body>
</html>
